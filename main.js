!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.host,r=t.authorization;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._host=n,this._headers={authorization:r},this.userId=void 0}var n,o;return n=e,o=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("error: ".concat(e.status,", ").concat(e.statusText))}},{key:"_handleError",value:function(e){console.log(e)}},{key:"getUserInfo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"me";return fetch("".concat(this._host,"/users/").concat(t),{headers:this._headers}).then(this._handleResponse).then((function(t){return e.userId=t._id,t})).catch(this._handleError)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._host,"/users/me/avatar"),{method:"PATCH",headers:t(t({},this._headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({avatar:e})}).then(this._handleResponse).catch(this._handleError)}},{key:"getCards",value:function(){return fetch("".concat(this._host,"/cards"),{headers:this._headers}).then(this._handleResponse).catch(this._handleError)}},{key:"updateUser",value:function(e){var n=e.name,r=e.about;return fetch("".concat(this._host,"/users/me"),{method:"PATCH",headers:t(t({},this._headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({name:n,about:r})}).then(this._handleResponse).catch(this._handleError)}},{key:"addCard",value:function(e){var n=e.name,r=e.link;return fetch("".concat(this._host,"/cards"),{method:"POST",headers:t(t({},this._headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({name:n,link:r})}).then(this._handleResponse).catch(this._handleError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._host,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._host,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this._host,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse).catch(this._handleError)}}],o&&r(n.prototype,o),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,r,o){var i=t.name,a=t.link,c=t.likes,u=t.liked,s=o.addLike,l=o.removeLike,f=o.deleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=i,this._link=a,this._likeCount=c.length,this._isliked=u,this._cardSelector=n.cardSelector,this._cardTemplateSelector=n.cardTemplateSelector,this._cardTitleSelector=n.cardTitleSelector,this._cardImageSelector=n.cardImageSelector,this._cardLikeSelector=n.cardLikeSelector,this._cardLikesCounterSelector=n.cardLikeCounterSelector,this._cardDeleteSelector=n.cardDeleteSelector,this._handleLike=this._handleLikeClick.bind(this),this._handleDelete=this._handleCardDelete.bind(this),this._handlePicture=n.openPicture,this._confirm=r,this._addLikeApi=s,this._removeLikeApi=l,this._deleteCardApi=f,this._activeLikeButtonClass=n.activeLikeButtonClass}var t,n;return t=e,n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplateSelector).content.querySelector(this._cardSelector).cloneNode(!0)}},{key:"_handleCardDelete",value:function(){var e=this;this._confirm((function(){e._element.remove(),e._element=null,e._deleteCardApi()}))}},{key:"_handleLikeClick",value:function(){var e=this._element.querySelector(this._cardLikeSelector);this._isliked?(this._isliked=!1,this._likeCount--,e.classList.remove(this._activeLikeButtonClass),this._element.querySelector(this._cardLikesCounterSelector).textContent="".concat(this._likeCount),this._removeLikeApi()):(this._isliked=!0,this._likeCount++,e.classList.add(this._activeLikeButtonClass),this._element.querySelector(this._cardLikesCounterSelector).textContent="".concat(this._likeCount),this._addLikeApi())}},{key:"_addCardEvents",value:function(e){var t=this._element.querySelector(this._cardImageSelector),n=this._element.querySelector(this._cardLikeSelector),r=this._element.querySelector(this._cardDeleteSelector);e?r.addEventListener("click",this._handleDelete):r.remove(),t.addEventListener("click",this._handlePicture),n.addEventListener("click",this._handleLike)}},{key:"generateCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._element=this._getTemplate(),this._addCardEvents(e),this._element.querySelector(this._cardTitleSelector).textContent=this._name,this._element.querySelector(this._cardLikesCounterSelector).textContent=this._likeCount,this._isliked&&this._element.querySelector(this._cardLikeSelector).classList.add(this._activeLikeButtonClass);var t=this._element.querySelector(this._cardImageSelector);return t.src=this._link,t.alt=this._name,this._element}}],n&&i(t.prototype,n),e}(),c=a,u={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_disabled",inputErrorClass:"form__input_error",errorClass:"form__input-error_visible"},s="popup_visible",l={cardSelector:".card",cardTemplateSelector:".card__template",cardTitleSelector:".card__title",cardImageSelector:".card__image",cardLikeSelector:".card__like-button",cardLikeCounterSelector:".card__like-counter",cardDeleteSelector:".card__delete-button",activeLikeButtonClass:"card__like-button_active"},f={host:"MISSING_ENV_VAR".HOST,token:"MISSING_ENV_VAR".TOKEN};function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_handleEscapeClose",(function(e){"Escape"===e.key&&n.close()})),d(this,"_handleOverlayClose",(function(e){e.target.classList.contains(s)&&n.close()})),this._element=document.querySelector(t),this._closeButton=this._element.querySelector(".popup__close-button"),this._handleCloseButton=function(){return n.close()}}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add(s),this.setEventListeners()}},{key:"close",value:function(){this._element.classList.remove(s),this.removeEventListeners()}},{key:"setEventListeners",value:function(){this._closeButton.addEventListener("click",this._handleCloseButton),this._element.addEventListener("click",this._handleOverlayClose),document.addEventListener("keydown",this._handleEscapeClose)}},{key:"removeEventListeners",value:function(){this._closeButton.removeEventListener("click",this._handleCloseButton),this._element.removeEventListener("click",this._handleOverlayClose),document.removeEventListener("keydown",this._handleEscapeClose)}}])&&h(t.prototype,n),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},S(e,t,n||e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=k(t);if(n){var o=k(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return m(this,e)});function o(e,t){var n,i,a,c,s,l=t.handleSubmit,f=t.resetValidation;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),g(b(s=r.call(this,e)),"_setInputValues",(function(e){for(var t=function(){var e,t,o=(e=r[n],t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],c=s._inputs.find((function(e){return e.name===i}));void 0!==c&&(c.value=a)},n=0,r=Object.entries(e);n<r.length;n++)t()})),g(b(s),"_getInputValues",(function(){var e={};return s._inputs.forEach((function(t){e[t.name]=t.value})),e})),g(b(s),"open",(function(e){s.setEventListeners(),s._setInputValues(e),S((n=b(s),k(o.prototype)),"open",n).call(n)})),g(b(s),"close",(function(){s.removeEventListeners(),s._resetValidation(),S((i=b(s),k(o.prototype)),"close",i).call(i),s._form.reset()})),g(b(s),"setEventListeners",(function(){s._form.addEventListener("submit",s._handleSubmit),S((a=b(s),k(o.prototype)),"setEventListeners",a).call(a)})),g(b(s),"removeEventListeners",(function(){s._form.removeEventListener("submit",s._handleSubmit),S((c=b(s),k(o.prototype)),"removeEventListeners",c).call(c)})),g(b(s),"toggleButtonText",(function(){var e=s._button.textContent;s._button.textContent=s._buttonText,s._buttonText=e})),s._handleSubmit=l.bind(b(s)),s._resetValidation=f,s._inputs=Array.from(s._element.querySelectorAll(u.inputSelector)),s._form=s._element.querySelector(u.formSelector),s._button=s._element.querySelector(u.submitButtonSelector),s._buttonText="Saving...",s}return o}(p);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},C(e,t,n||e)}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function j(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._title=t._element.querySelector(".popup__picture-title"),t._image=t._element.querySelector(".popup__picture"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._title.textContent=n,this._image.setAttribute("src",t),this._image.setAttribute("alt",n),C(P(a.prototype),"open",this).call(this)}}])&&w(t.prototype,n),a}(p);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function R(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},x(e,t,n||e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=A(t);if(n){var o=A(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return R(this,e)});function o(e,t){var n,i,a,c,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),D(q(u=r.call(this,e)),"open",(function(e){u._handleConfirm=function(){e(),u.close()},u.setEventListeners(),x((n=q(u),A(o.prototype)),"open",n).call(n)})),D(q(u),"close",(function(){u.removeEventListeners(),x((i=q(u),A(o.prototype)),"close",i).call(i)})),D(q(u),"setEventListeners",(function(){u._buttonElement.addEventListener("click",u._handleConfirm),x((a=q(u),A(o.prototype)),"setEventListeners",a).call(a)})),D(q(u),"removeEventListeners",(function(){u._buttonElement.removeEventListener("click",u._handleConfirm),x((c=q(u),A(o.prototype)),"removeEventListeners",c).call(c)})),u._handleConfirm=function(){return u.close()},u._buttonElement=u._element.querySelector(t),u}return o}(p);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t){var n=t.userNameSelector,r=t.descriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._bioElement=document.querySelector(r),this._imageElement=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,bio:this._bioElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._nameElement.textContent=t,this._bioElement.textContent=n}},{key:"setUserAvatar",value:function(e){this._imageElement.src=e}}])&&U(t.prototype,n),e}();function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t,n){var r=t.inputSelector,o=t.submitButtonSelector,i=t.inactiveButtonClass,a=t.inputErrorClass,c=t.errorClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=n,this._inputSelector=r,this._submitButtonSelector=o,this._inactiveButtonClass=i,this._inputErrorClass=a,this._errorClass=c,this._boundHandleInput=this._handleInput.bind(this)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._inputElements=this._form.querySelectorAll(this._inputSelector),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._inputElements.forEach((function(t){e._hideError(t)})),this._disableButton()}},{key:"_handleInput",value:function(e){this._validateInput(e.target),this._setButtonState()}},{key:"_validateInput",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_hideError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_showError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_setEventListeners",value:function(){var e=this;this._inputElements.forEach((function(t){return t.addEventListener("input",e._boundHandleInput)}))}},{key:"_setButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputElements).some((function(e){return!e.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}}])&&M(t.prototype,n),e}();function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=new o({host:f.host,authorization:f.token}),F=new N({userNameSelector:".profile__name",descriptionSelector:".profile__bio",avatarSelector:".profile__image"}),Q=new T(".popup_name_picture"),W=new E(".popup_name_edit-profile",{handleSubmit:function(e){var t=this;e.preventDefault(),this.toggleButtonText();var n=this._getInputValues(),r=n.name,o=n.bio;F.setUserInfo({name:r,about:o}),$.updateUser({name:r,about:o}).then((function(){t.close(),t.toggleButtonText()}))},resetValidation:function(){return re.resetValidation()}}),X=new E(".popup_name_new-place",{handleSubmit:function(e){var t=this;e.preventDefault(),this.toggleButtonText();var n=this._getInputValues(),r=n.title,o=n.link;$.addCard({name:r,link:o}).then((function(e){return ae.addItem(e)})).then((function(){t.close(),t.toggleButtonText()}))},resetValidation:function(){return oe.resetValidation()}}),Y=new E(".popup_name_edit-avatar",{handleSubmit:function(e){var t=this;e.preventDefault(),this.toggleButtonText();var n=this._getInputValues().url;F.setUserAvatar(n),$.updateUserAvatar(n).then((function(){t.close(),t.toggleButtonText()}))},resetValidation:function(){return ie.resetValidation()}}),Z=new V(".popup_name_confirm",u.submitButtonSelector),ee=document.querySelector(".form_name_edit-profile"),te=document.querySelector(".form_name_new-place"),ne=document.querySelector(".form_name_edit-avatar"),re=new z(u,ee),oe=new z(u,te),ie=new z(u,ne),ae=new function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H(this,"renderItems",(function(e){e.forEach(r.addItem)})),H(this,"addItem",(function(e){var t=r._renderer(e);r._container.prepend(t)})),this._renderer=t,this._container=document.querySelector(n)}((function(e){var t={addLike:function(){return $.addLike(e._id)},removeLike:function(){return $.removeLike(e._id)},deleteCard:function(){return $.deleteCard(e._id)}};return new c(G(G({},e),{},{liked:e.likes.some((function(e){return e._id===$.userId}))}),G(G({},l),{},{openPicture:function(){return Q.open(e)}}),Z.open,t).generateCard(e.owner._id===$.userId)}),".gallery__container");function ce(e){ae.renderItems(e.reverse())}var ue=document.querySelector(".profile__edit-button"),se=document.querySelector(".profile__add-button"),le=document.querySelector(".profile__avatar");ue.addEventListener("click",(function(e){e.stopPropagation();var t=F.getUserInfo(),n=t.name,r=t.bio;W.open({name:n,bio:r})})),se.addEventListener("click",(function(e){e.stopPropagation(),X.open({})})),le.addEventListener("click",(function(e){e.stopPropagation(),Y.open({})})),re.enableValidation(),oe.enableValidation(),ie.enableValidation(),$.getUserInfo().then((function(e){F.setUserInfo(e),F.setUserAvatar(e.avatar)})).then((function(){return $.getCards().then(ce)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQWEsa0JBQU11SCxFQUFhZ0MsS0FBS3BNLE1BQVF1TCxFQUFhYSxLQUFNRixHQUMzSkcsYUFBYXJNLEVBQUtzTSxNQUFNck0sTUFBTWlLLEVBQUluTCxVUDFEcEIsdUJPOEMvQixTQUFTd04sR0FBZ0JDLEdBQ3ZCekIsR0FBZTBCLFlBQVlELEVBQU1FLFdBa0JuQyxJQUFNQyxHQUFhdkosU0FBU0MsY1BwR0QseUJPcUdyQnVKLEdBQVl4SixTQUFTQyxjUHBHRCx3Qk9xR3BCd0osR0FBZXpKLFNBQVNDLGNQcEdHLG9CT3NHakNzSixHQUFXekksaUJBQWlCLFNBSzVCLFNBQStCc0IsR0FDN0JBLEVBQUVzSCxrQkFFRixNQUFvQjNDLEVBQVk0QyxjQUF6QnRNLEVBQVAsRUFBT0EsS0FBTWlJLEVBQWIsRUFBYUEsSUFDYjJCLEVBQVUrQixLQUFLLENBQUMzTCxLQUFBQSxFQUFNaUksSUFBQUEsT0FSeEJrRSxHQUFVMUksaUJBQWlCLFNBWTNCLFNBQThCc0IsR0FDNUJBLEVBQUVzSCxrQkFFRmxDLEVBQVN3QixLQUFLLE9BZGhCUyxHQUFhM0ksaUJBQWlCLFNBa0I5QixTQUErQnNCLEdBQzdCQSxFQUFFc0gsa0JBRUY1QixFQUFZa0IsS0FBSyxPQU9uQnpCLEdBQXFCcUMsbUJBQ3JCL0IsR0FBcUIrQixtQkFDckIxQixHQUFvQjBCLG1CQU1wQjlDLEVBQUk2QyxjQUFjak4sTUFBSyxTQUFBRSxHQUNyQm1LLEVBQVlNLFlBQVl6SyxHQUN4Qm1LLEVBQVlpQixjQUFjcEwsRUFBS0ksV0FFaENOLE1BQUssa0JBQ0pvSyxFQUFJK0MsV0FDSG5OLEtBQUt5TSxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7aG9zdCwgYXV0aG9yaXphdGlvbn0pIHtcbiAgICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgICB0aGlzLl9oZWFkZXJzID0geyBhdXRob3JpemF0aW9uIH1cbiAgICB0aGlzLnVzZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuICBfaGFuZGxlUmVzcG9uc2UocmVzKXtcbiAgICBpZihyZXMub2spXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYGVycm9yOiAke3Jlcy5zdGF0dXN9LCAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICB9XG4gIF9oYW5kbGVFcnJvcihlcnJvcil7XG4gICAgY29uc29sZS5sb2coZXJyb3IpXG4gIH1cbiAgZ2V0VXNlckluZm8oaWQ9J21lJyl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2hvc3R9L3VzZXJzLyR7aWR9YCx7aGVhZGVyczogdGhpcy5faGVhZGVyc30pXG4gICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICB0aGlzLnVzZXJJZCA9IGRhdGEuX2lkO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSlcbiAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpXG4gIH1cbiAgdXBkYXRlVXNlckF2YXRhcihhdmF0YXIpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS91c2Vycy9tZS9hdmF0YXJgLHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4udGhpcy5faGVhZGVycyxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhclxuICAgICAgfSl9KVxuICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcilcbiAgfVxuICBnZXRDYXJkcygpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkc2Ase2hlYWRlcnM6IHRoaXMuX2hlYWRlcnN9KVxuICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcilcbiAgfVxuICB1cGRhdGVVc2VyKHtuYW1lLGFib3V0fSl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2hvc3R9L3VzZXJzL21lYCx7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLnRoaXMuX2hlYWRlcnMsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dFxuICAgICAgfSl9KVxuICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcilcbiAgfVxuICBhZGRDYXJkKHtuYW1lLGxpbmt9KXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vY2FyZHNgLHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi50aGlzLl9oZWFkZXJzLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGlua1xuICAgICAgfSl9KVxuICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcilcbiAgfVxuICBkZWxldGVDYXJkKGlkKXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vY2FyZHMvJHtpZH1gLCB7bWV0aG9kOiAnREVMRVRFJywgaGVhZGVyczogdGhpcy5faGVhZGVyc30pXG4gICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cbiAgYWRkTGlrZShpZCl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2hvc3R9L2NhcmRzL2xpa2VzLyR7aWR9YCwge21ldGhvZDogJ1BVVCcsIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnN9KVxuICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG4gIHJlbW92ZUxpa2UoaWQpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkcy9saWtlcy8ke2lkfWAsIHttZXRob2Q6ICdERUxFVEUnLCBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzfSlcbiAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgICAuY2F0Y2godGhpcy5faGFuZGxlRXJyb3IpXG4gIH1cbn1cbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgbGluaywgbGlrZXMsIGxpa2VkfSwgYXNzZXRzLCBjb25maXJtRGVsZXRlLCB7YWRkTGlrZSwgcmVtb3ZlTGlrZSwgZGVsZXRlQ2FyZH0pIHtcblxuICAgIC8vZGF0YVxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2xpa2VDb3VudCA9IGxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9pc2xpa2VkID0gbGlrZWQ7XG5cbiAgICAvLyBzZWxlY3RvcnNcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBhc3NldHMuY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gYXNzZXRzLmNhcmRUZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmRUaXRsZVNlbGVjdG9yID0gYXNzZXRzLmNhcmRUaXRsZVNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmRJbWFnZVNlbGVjdG9yID0gYXNzZXRzLmNhcmRJbWFnZVNlbGVjdG9yO1xuICAgIHRoaXMuX2NhcmRMaWtlU2VsZWN0b3IgPSBhc3NldHMuY2FyZExpa2VTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkTGlrZXNDb3VudGVyU2VsZWN0b3IgPSBhc3NldHMuY2FyZExpa2VDb3VudGVyU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZERlbGV0ZVNlbGVjdG9yID0gYXNzZXRzLmNhcmREZWxldGVTZWxlY3RvcjtcblxuICAgIC8vIGJvdW5kIGhhbmRsZXJzOlxuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSB0aGlzLl9oYW5kbGVMaWtlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9oYW5kbGVQaWN0dXJlID0gYXNzZXRzLm9wZW5QaWN0dXJlO1xuICAgIHRoaXMuX2NvbmZpcm0gPSBjb25maXJtRGVsZXRlO1xuICAgIHRoaXMuX2FkZExpa2VBcGkgPSBhZGRMaWtlO1xuICAgIHRoaXMuX3JlbW92ZUxpa2VBcGkgPSByZW1vdmVMaWtlO1xuICAgIHRoaXMuX2RlbGV0ZUNhcmRBcGkgPSBkZWxldGVDYXJkO1xuXG4gICAgdGhpcy5fYWN0aXZlTGlrZUJ1dHRvbkNsYXNzID0gYXNzZXRzLmFjdGl2ZUxpa2VCdXR0b25DbGFzcztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50O1xuICAgIHJldHVybiBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9oYW5kbGVDYXJkRGVsZXRlKCkge1xuICAgIHRoaXMuX2NvbmZpcm0oKCkgPT57XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkQXBpKCk7XG4gICAgfSlcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQ2xpY2soKSB7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkTGlrZVNlbGVjdG9yKTtcbiAgICBpZih0aGlzLl9pc2xpa2VkKXtcbiAgICAgIHRoaXMuX2lzbGlrZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2xpa2VDb3VudC0tO1xuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUxpa2VCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZExpa2VzQ291bnRlclNlbGVjdG9yKS50ZXh0Q29udGVudCA9IGAke3RoaXMuX2xpa2VDb3VudH1gO1xuICAgICAgdGhpcy5fcmVtb3ZlTGlrZUFwaSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX2lzbGlrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fbGlrZUNvdW50Kys7XG4gICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZlTGlrZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkTGlrZXNDb3VudGVyU2VsZWN0b3IpLnRleHRDb250ZW50ID0gYCR7dGhpcy5fbGlrZUNvdW50fWA7XG4gICAgICB0aGlzLl9hZGRMaWtlQXBpKCk7XG4gICAgfVxuICB9XG5cbiAgX2FkZENhcmRFdmVudHMoaXNDYXJkT3duZXIpe1xuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkSW1hZ2VTZWxlY3Rvcik7XG4gICAgY29uc3QgY2FyZExpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZExpa2VTZWxlY3Rvcik7XG4gICAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkRGVsZXRlU2VsZWN0b3IpO1xuXG4gICAgaWYoaXNDYXJkT3duZXIpe1xuICAgICAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURlbGV0ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2FyZERlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVQaWN0dXJlKTtcbiAgICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUxpa2UpO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKGlzQ2FyZE93bmVyPWZhbHNlKXtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2FkZENhcmRFdmVudHMoaXNDYXJkT3duZXIpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkVGl0bGVTZWxlY3RvcikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkTGlrZXNDb3VudGVyU2VsZWN0b3IpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZUNvdW50O1xuICAgIGlmKHRoaXMuX2lzbGlrZWQpXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZExpa2VTZWxlY3RvcikuY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVMaWtlQnV0dG9uQ2xhc3MpO1xuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRJbWFnZVNlbGVjdG9yKTtcbiAgICBpbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiLypcbiAgRE9NIGVsZW1lbnRzOlxuKi9cblxuLy8gRm9ybXNcbmNvbnN0IHByb2ZpbGVGb3JtU2VsZWN0b3IgPSAnLmZvcm1fbmFtZV9lZGl0LXByb2ZpbGUnO1xuY29uc3QgcGljdHVyZUZvcm1TZWxlY3RvciA9ICcuZm9ybV9uYW1lX25ldy1wbGFjZSc7XG5jb25zdCBhdmF0YXJGb3JtU2VsZWN0b3IgPSAnLmZvcm1fbmFtZV9lZGl0LWF2YXRhcic7XG5jb25zdCBmb3JtU2VsZWN0b3JzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfdmlzaWJsZVwiXG59XG5cbi8vIEJ1dHRvbnNcbmNvbnN0IGVkaXRCdXR0b25TZWxlY3RvciA9ICcucHJvZmlsZV9fZWRpdC1idXR0b24nO1xuY29uc3QgYWRkQnV0dG9uU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2FkZC1idXR0b24nO1xuY29uc3QgZWRpdEF2YXRhckJ1dHRvblNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXInO1xuXG4vLyBQcm9maWxlXG5jb25zdCBwcm9maWxlU2VsZWN0b3JzID0ge1xuICB1c2VyTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiAnLnByb2ZpbGVfX2JpbycsXG4gIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2ltYWdlJ1xufTtcblxuLy8gUG9wdXBzXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwU2VsZWN0b3IgPSAnLnBvcHVwX25hbWVfZWRpdC1wcm9maWxlJztcbmNvbnN0IGFkZENhcmRQb3B1cFNlbGVjdG9yID0gJy5wb3B1cF9uYW1lX25ldy1wbGFjZSc7XG5jb25zdCBwaWN0dXJlUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfbmFtZV9waWN0dXJlJztcbmNvbnN0IGF2YXRhclBvcHVwU2VsZWN0b3IgPSAnLnBvcHVwX25hbWVfZWRpdC1hdmF0YXInO1xuY29uc3QgY29uZmlybVBvcHVwU2VsZWN0b3IgPSAnLnBvcHVwX25hbWVfY29uZmlybSc7XG5cbmNvbnN0IGFjdGl2ZVBvcHVwQ2xhc3MgPSBcInBvcHVwX3Zpc2libGVcIjtcbmNvbnN0IHBvcHVwQ2xvc2VCdXR0b25TZWxlY3RvciA9ICcucG9wdXBfX2Nsb3NlLWJ1dHRvbic7XG5jb25zdCBwb3B1cFRpdGxlU2VsZWN0b3IgPSAnLnBvcHVwX19waWN0dXJlLXRpdGxlJztcbmNvbnN0IHBvcHVwSW1hZ2VTZWxlY3RvciA9ICcucG9wdXBfX3BpY3R1cmUnO1xuXG5cbi8vIENhcmRzXG5jb25zdCBjYXJkU2VsZWN0b3JzID0ge1xuICBjYXJkU2VsZWN0b3I6IFwiLmNhcmRcIixcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3I6IFwiLmNhcmRfX3RlbXBsYXRlXCIsXG4gIGNhcmRUaXRsZVNlbGVjdG9yOiBcIi5jYXJkX190aXRsZVwiLFxuICBjYXJkSW1hZ2VTZWxlY3RvcjogXCIuY2FyZF9faW1hZ2VcIixcbiAgY2FyZExpa2VTZWxlY3RvcjogXCIuY2FyZF9fbGlrZS1idXR0b25cIixcbiAgY2FyZExpa2VDb3VudGVyU2VsZWN0b3I6IFwiLmNhcmRfX2xpa2UtY291bnRlclwiLFxuICBjYXJkRGVsZXRlU2VsZWN0b3I6IFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIixcbiAgYWN0aXZlTGlrZUJ1dHRvbkNsYXNzOiBcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiXG59XG5jb25zdCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yID0gJy5nYWxsZXJ5X19jb250YWluZXInO1xuXG4vKlxuICBBcGk6XG4qL1xuY29uc3QgYXBpS2V5ID0ge1xuICBob3N0OiBwcm9jZXNzLmVudi5IT1NULFxuICB0b2tlbjogcHJvY2Vzcy5lbnYuVE9LRU5cbn1cblxuZXhwb3J0IHthcGlLZXksIGZvcm1TZWxlY3RvcnMsIGFjdGl2ZVBvcHVwQ2xhc3MsIGNhcmRTZWxlY3RvcnMsIGVkaXRCdXR0b25TZWxlY3RvciwgYWRkQnV0dG9uU2VsZWN0b3IsIGVkaXRBdmF0YXJCdXR0b25TZWxlY3RvciwgZWRpdFByb2ZpbGVQb3B1cFNlbGVjdG9yLCBhZGRDYXJkUG9wdXBTZWxlY3RvciwgcGljdHVyZVBvcHVwU2VsZWN0b3IsIGF2YXRhclBvcHVwU2VsZWN0b3IsIGNvbmZpcm1Qb3B1cFNlbGVjdG9yLCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLCBwcm9maWxlRm9ybVNlbGVjdG9yLCBwaWN0dXJlRm9ybVNlbGVjdG9yLCBhdmF0YXJGb3JtU2VsZWN0b3IsIHBvcHVwQ2xvc2VCdXR0b25TZWxlY3RvciwgcG9wdXBUaXRsZVNlbGVjdG9yLCBwb3B1cEltYWdlU2VsZWN0b3IsIHByb2ZpbGVTZWxlY3RvcnN9O1xuIiwiaW1wb3J0IHsgYWN0aXZlUG9wdXBDbGFzcywgcG9wdXBDbG9zZUJ1dHRvblNlbGVjdG9yIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBDbG9zZUJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVDbG9zZUJ1dHRvbiA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChhY3RpdmVQb3B1cENsYXNzKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZVBvcHVwQ2xhc3MpO1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZSkgPT4ge1xuICAgIGlmKGUua2V5PT09J0VzY2FwZScpXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gIH1cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGFjdGl2ZVBvcHVwQ2xhc3MpKVxuICAgICAgdGhpcy5jbG9zZSgpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24pO1xuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbG9zZUJ1dHRvbik7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5pbXBvcnQgeyBmb3JtU2VsZWN0b3JzIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCB7aGFuZGxlU3VibWl0LCByZXNldFZhbGlkYXRpb259KSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5fcmVzZXRWYWxpZGF0aW9uID0gcmVzZXRWYWxpZGF0aW9uO1xuXG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZm9ybVNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3JzLmZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9ICdTYXZpbmcuLi4nO1xuICB9XG4gIF9zZXRJbnB1dFZhbHVlcyA9ICh2YWx1ZXMpID0+IHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZXMpKSB7XG4gICAgICBjb25zdCBpbnB1dCA9IHRoaXMuX2lucHV0cy5maW5kKGlucHV0ID0+IGlucHV0Lm5hbWUgPT09IGtleSk7XG4gICAgICBpZih0eXBlb2YgaW5wdXQgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuICBvcGVuID0gKHZhbHVlcykgPT4ge1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9zZXRJbnB1dFZhbHVlcyh2YWx1ZXMpO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuICBjbG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgdG9nZ2xlQnV0dG9uVGV4dCA9ICgpID0+IHtcbiAgICBjb25zdCBidXR0b25UZXh0ID0gdGhpcy5fYnV0dG9uLnRleHRDb250ZW50O1xuICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblRleHQ7XG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9IGJ1dHRvblRleHQ7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuaW1wb3J0IHsgcG9wdXBUaXRsZVNlbGVjdG9yLCBwb3B1cEltYWdlU2VsZWN0b3IgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwVGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZVNlbGVjdG9yKTtcbiAgfVxuICBvcGVuKHtsaW5rLCBuYW1lfSkge1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGxpbmspO1xuICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgbmFtZSk7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgYnV0dG9uU2VsZWN0b3Ipe1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uU2VsZWN0b3IpO1xuICB9XG4gIG9wZW4gPSAoaGFuZGxlQ29uZmlybSkgPT4ge1xuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm0gPSAoKSA9PiB7XG4gICAgICBoYW5kbGVDb25maXJtKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbiAgY2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNvbmZpcm0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNvbmZpcm0pO1xuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe3VzZXJOYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9iaW9FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge25hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LCBiaW86IHRoaXMuX2Jpb0VsZW1lbnQudGV4dENvbnRlbnR9O1xuICB9XG4gIHNldFVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYmlvRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG4gIHNldFVzZXJBdmF0YXIobGluayl7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gIH1cbn1cbiIsImNsYXNzIFZhbGlkYXRpb24ge1xuICBjb25zdHJ1Y3Rvcih7aW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IsIGluYWN0aXZlQnV0dG9uQ2xhc3MsIGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzc30sIGZvcm0pIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcblxuICAgIC8vIHNlbGVjdG9yc1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBpbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc3VibWl0QnV0dG9uU2VsZWN0b3I7XG5cbiAgICAvLyBjbGFzc2VzXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBlcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fYm91bmRIYW5kbGVJbnB1dCA9IHRoaXMuX2hhbmRsZUlucHV0LmJpbmQodGhpcyk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaChpbnB1dD0+e1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICB9KTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gIH1cblxuICBfaGFuZGxlSW5wdXQoZSl7XG4gICAgdGhpcy5fdmFsaWRhdGVJbnB1dChlLnRhcmdldCk7XG4gICAgdGhpcy5fc2V0QnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIF92YWxpZGF0ZUlucHV0KGlucHV0KSB7XG4gICAgaWYoaW5wdXQudmFsaWRpdHkudmFsaWQpe1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHRoaXMuX3Nob3dFcnJvcihpbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgX2hpZGVFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3Nob3dFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaChpbnB1dCA9PiBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX2JvdW5kSGFuZGxlSW5wdXQpKTtcbiAgfVxuXG4gIF9zZXRCdXR0b25TdGF0ZSgpIHtcbiAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dEVsZW1lbnRzKS5zb21lKGlucHV0PT4haW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZhbGlkYXRpb247XG4iLCIvLyBzdHlsZTpcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG4vLyBjb21wb25lbnRzOlxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaSdcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0nO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbidcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvJztcbmltcG9ydCBTZWN0aW9uICBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24nO1xuaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9WYWxpZGF0aW9uJztcbmltcG9ydCB7YXBpS2V5LCBwcm9maWxlU2VsZWN0b3JzLCBmb3JtU2VsZWN0b3JzLCBjYXJkU2VsZWN0b3JzLCBlZGl0QnV0dG9uU2VsZWN0b3IsIGFkZEJ1dHRvblNlbGVjdG9yLCBlZGl0QXZhdGFyQnV0dG9uU2VsZWN0b3IsIGF2YXRhclBvcHVwU2VsZWN0b3IsIGNvbmZpcm1Qb3B1cFNlbGVjdG9yLCBlZGl0UHJvZmlsZVBvcHVwU2VsZWN0b3IsIGFkZENhcmRQb3B1cFNlbGVjdG9yLCBwaWN0dXJlUG9wdXBTZWxlY3RvciwgY2FyZHNDb250YWluZXJTZWxlY3RvciwgcHJvZmlsZUZvcm1TZWxlY3RvciwgcGljdHVyZUZvcm1TZWxlY3RvciwgYXZhdGFyRm9ybVNlbGVjdG9yLCBpbml0aWFsQ2FyZHN9IGZyb20gJy4uL2NvbXBvbmVudHMvY29uc3RhbnRzJ1xuXG4vKlxuICBBUEk6XG4qL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtob3N0OiBhcGlLZXkuaG9zdCwgYXV0aG9yaXphdGlvbjogYXBpS2V5LnRva2VufSk7XG5cbi8qXG4gIFByb2ZpbGU6XG4qL1xuXG5jb25zdCBwcm9maWxlVmlldyA9IG5ldyBVc2VySW5mbyhwcm9maWxlU2VsZWN0b3JzKTtcblxuLypcbiAgUG9wdXBzOlxuKi9cblxuY29uc3QgcGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBpY3R1cmVQb3B1cFNlbGVjdG9yKTtcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRQcm9maWxlUG9wdXBTZWxlY3Rvciwge2hhbmRsZVN1Ym1pdDogaGFuZGxlUHJvZmlsZVN1Ym1pdCwgcmVzZXRWYWxpZGF0aW9uOiAoKT0+cHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCl9KTtcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oYWRkQ2FyZFBvcHVwU2VsZWN0b3IsIHtoYW5kbGVTdWJtaXQ6IGhhbmRsZVBsYWNlU3VibWl0LCByZXNldFZhbGlkYXRpb246ICgpPT5waWN0dXJlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKX0pO1xuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShhdmF0YXJQb3B1cFNlbGVjdG9yLCB7aGFuZGxlU3VibWl0OiBoYW5kbGVBdmF0YXJTdWJtaXQsIHJlc2V0VmFsaWRhdGlvbjogKCk9PmF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCl9KTtcbmNvbnN0IGNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oY29uZmlybVBvcHVwU2VsZWN0b3IsIGZvcm1TZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4vKlxuICBGb3JtczpcbiovXG5cbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUZvcm1TZWxlY3Rvcik7XG5jb25zdCBwaWN0dXJlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBpY3R1cmVGb3JtU2VsZWN0b3IpO1xuY29uc3QgYXZhdGFyRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhckZvcm1TZWxlY3Rvcik7XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IFZhbGlkYXRpb24oZm9ybVNlbGVjdG9ycywgcHJvZmlsZUZvcm1FbGVtZW50KTtcbmNvbnN0IHBpY3R1cmVGb3JtVmFsaWRhdG9yID0gbmV3IFZhbGlkYXRpb24oZm9ybVNlbGVjdG9ycywgcGljdHVyZUZvcm1FbGVtZW50KTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgVmFsaWRhdGlvbihmb3JtU2VsZWN0b3JzLCBhdmF0YXJGb3JtRWxlbWVudCk7XG5cbi8vIFBsYWNlIGZvcm0gZGF0YSBoYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVQbGFjZVN1Ym1pdChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICB0aGlzLnRvZ2dsZUJ1dHRvblRleHQoKTtcblxuICBjb25zdCB7dGl0bGU6IG5hbWUsIGxpbmt9ID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgYXBpLmFkZENhcmQoe25hbWUsIGxpbmt9KS50aGVuKGRhdGEgPT4gZ2FsbGVyeVNlY3Rpb24uYWRkSXRlbShkYXRhKSlcbiAgLnRoZW4oKCkgPT4ge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblRleHQoKTtcbiAgfSk7XG59XG5cbi8vIFByb2ZpbGUgZm9ybSBkYXRhIGhhbmRsZXJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgdGhpcy50b2dnbGVCdXR0b25UZXh0KCk7XG5cbiAgY29uc3Qge25hbWUsIGJpbzogYWJvdXR9ID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgcHJvZmlsZVZpZXcuc2V0VXNlckluZm8oe25hbWUsIGFib3V0fSlcbiAgYXBpLnVwZGF0ZVVzZXIoe25hbWUsIGFib3V0fSlcbiAgLnRoZW4oKCkgPT4ge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblRleHQoKTtcbiAgfSk7XG59XG5cbi8vIEF2YXRhciBmb3JtIHN1Ym1pdFxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KGUpe1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgdGhpcy50b2dnbGVCdXR0b25UZXh0KCk7XG5cbiAgY29uc3Qge3VybH0gPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuXG4gIHByb2ZpbGVWaWV3LnNldFVzZXJBdmF0YXIodXJsKTtcbiAgYXBpLnVwZGF0ZVVzZXJBdmF0YXIodXJsKVxuICAudGhlbigoKSA9PiB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uVGV4dCgpO1xuICB9KTtcbn1cblxuLypcbiAgQ2FyZHM6XG4qL1xuXG5jb25zdCBnYWxsZXJ5U2VjdGlvbiA9IG5ldyBTZWN0aW9uKGFkZE5ld0NhcmQsIGNhcmRzQ29udGFpbmVyU2VsZWN0b3IpO1xuXG5mdW5jdGlvbiBnZXRDYXJkc0Zyb21BcGkoY2FyZHMpe1xuICBnYWxsZXJ5U2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcy5yZXZlcnNlKCkpO1xufVxuXG5mdW5jdGlvbiBhZGROZXdDYXJkKGRhdGEpe1xuICBjb25zdCBjYXJkQXBpRnVuY3Rpb25zID0ge1xuICAgIGFkZExpa2U6ICgpID0+IGFwaS5hZGRMaWtlKGRhdGEuX2lkKSxcbiAgICByZW1vdmVMaWtlOiAoKSA9PiBhcGkucmVtb3ZlTGlrZShkYXRhLl9pZCksXG4gICAgZGVsZXRlQ2FyZDogKCkgPT4gYXBpLmRlbGV0ZUNhcmQoZGF0YS5faWQpXG4gIH1cblxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoey4uLmRhdGEsIGxpa2VkOiBkYXRhLmxpa2VzLnNvbWUob2JqPT5vYmouX2lkPT09YXBpLnVzZXJJZCl9LCB7Li4uY2FyZFNlbGVjdG9ycywgb3BlblBpY3R1cmU6ICgpID0+IHBpY3R1cmVQb3B1cC5vcGVuKGRhdGEpfSwgY29uZmlybVBvcHVwLm9wZW4sIGNhcmRBcGlGdW5jdGlvbnMpO1xuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoZGF0YS5vd25lci5faWQ9PT1hcGkudXNlcklkKTtcbn1cblxuLypcbiAgUGFnZSBCdXR0b25zOlxuKi9cblxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWRpdEJ1dHRvblNlbGVjdG9yKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWRkQnV0dG9uU2VsZWN0b3IpO1xuY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlZGl0QXZhdGFyQnV0dG9uU2VsZWN0b3IpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRWRpdEJ1dHRvbkNsaWNrKTtcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUFkZEJ1dHRvbkNsaWNrKTtcbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUVkaXRBdmF0YXJDbGljayk7XG5cbi8vIEVkaXQgY2xpY2sgaGFuZGxlclxuZnVuY3Rpb24gaGFuZGxlRWRpdEJ1dHRvbkNsaWNrKGUpIHtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICBjb25zdCB7bmFtZSwgYmlvfSA9IHByb2ZpbGVWaWV3LmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQb3B1cC5vcGVuKHtuYW1lLCBiaW99KTtcbn1cblxuLy8gQWRkIGNsaWNrIGhhbmRsZXJcbmZ1bmN0aW9uIGhhbmRsZUFkZEJ1dHRvbkNsaWNrKGUpIHtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICBhZGRQb3B1cC5vcGVuKHt9KTtcbn1cblxuLy8gQXZhdGFyIGNsaWNrIGhhbmRsZXJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRBdmF0YXJDbGljayhlKXtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICBhdmF0YXJQb3B1cC5vcGVuKHt9KTtcbn1cblxuLypcbiAgVmFsaWRhdGlvbjpcbiovXG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnBpY3R1cmVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vKlxuICBMb2FkIGluaXRpYWwgQXBpIGRhdGE6XG4qL1xuXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKGRhdGE9PntcbiAgcHJvZmlsZVZpZXcuc2V0VXNlckluZm8oZGF0YSk7XG4gIHByb2ZpbGVWaWV3LnNldFVzZXJBdmF0YXIoZGF0YS5hdmF0YXIpO1xufSlcbi50aGVuKCgpID0+XG4gIGFwaS5nZXRDYXJkcygpXG4gIC50aGVuKGdldENhcmRzRnJvbUFwaSlcbiAgKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlckl0ZW1zID0gKGl0ZW1zKSA9PiB7XG4gICAgaXRlbXMuZm9yRWFjaCh0aGlzLmFkZEl0ZW0pO1xuICB9XG4gIGFkZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChuZXdFbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkFwaSIsImhvc3QiLCJhdXRob3JpemF0aW9uIiwidGhpcyIsIl9ob3N0IiwiX2hlYWRlcnMiLCJ1c2VySWQiLCJ1bmRlZmluZWQiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImlkIiwiZmV0Y2giLCJoZWFkZXJzIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsImRhdGEiLCJfaWQiLCJjYXRjaCIsIl9oYW5kbGVFcnJvciIsImF2YXRhciIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwibGluayIsIkNhcmQiLCJhc3NldHMiLCJjb25maXJtRGVsZXRlIiwibGlrZXMiLCJsaWtlZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiZGVsZXRlQ2FyZCIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZUNvdW50IiwibGVuZ3RoIiwiX2lzbGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiX2NhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfY2FyZFRpdGxlU2VsZWN0b3IiLCJjYXJkVGl0bGVTZWxlY3RvciIsIl9jYXJkSW1hZ2VTZWxlY3RvciIsImNhcmRJbWFnZVNlbGVjdG9yIiwiX2NhcmRMaWtlU2VsZWN0b3IiLCJjYXJkTGlrZVNlbGVjdG9yIiwiX2NhcmRMaWtlc0NvdW50ZXJTZWxlY3RvciIsImNhcmRMaWtlQ291bnRlclNlbGVjdG9yIiwiX2NhcmREZWxldGVTZWxlY3RvciIsImNhcmREZWxldGVTZWxlY3RvciIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZUxpa2VDbGljayIsImJpbmQiLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUNhcmREZWxldGUiLCJfaGFuZGxlUGljdHVyZSIsIm9wZW5QaWN0dXJlIiwiX2NvbmZpcm0iLCJfYWRkTGlrZUFwaSIsIl9yZW1vdmVMaWtlQXBpIiwiX2RlbGV0ZUNhcmRBcGkiLCJfYWN0aXZlTGlrZUJ1dHRvbkNsYXNzIiwiYWN0aXZlTGlrZUJ1dHRvbkNsYXNzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwicmVtb3ZlIiwibGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwiYWRkIiwiaXNDYXJkT3duZXIiLCJjYXJkSW1hZ2UiLCJjYXJkTGlrZUJ1dHRvbiIsImNhcmREZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2dldFRlbXBsYXRlIiwiX2FkZENhcmRFdmVudHMiLCJpbWFnZSIsInNyYyIsImFsdCIsImZvcm1TZWxlY3RvcnMiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImFjdGl2ZVBvcHVwQ2xhc3MiLCJjYXJkU2VsZWN0b3JzIiwiYXBpS2V5IiwicHJvY2VzcyIsIkhPU1QiLCJ0b2tlbiIsIlRPS0VOIiwiUG9wdXAiLCJzZWxlY3RvciIsImUiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUNsb3NlQnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlcyIsInZhbHVlIiwiaW5wdXQiLCJfaW5wdXRzIiwiZmluZCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwiX3NldElucHV0VmFsdWVzIiwiX3Jlc2V0VmFsaWRhdGlvbiIsIl9mb3JtIiwicmVzZXQiLCJfaGFuZGxlU3VibWl0IiwiYnV0dG9uVGV4dCIsIl9idXR0b24iLCJfYnV0dG9uVGV4dCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQb3B1cFdpdGhJbWFnZSIsIl90aXRsZSIsIl9pbWFnZSIsInNldEF0dHJpYnV0ZSIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImJ1dHRvblNlbGVjdG9yIiwiaGFuZGxlQ29uZmlybSIsIl9oYW5kbGVDb25maXJtIiwiX2J1dHRvbkVsZW1lbnQiLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfYmlvRWxlbWVudCIsIl9pbWFnZUVsZW1lbnQiLCJiaW8iLCJWYWxpZGF0aW9uIiwiZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfYm91bmRIYW5kbGVJbnB1dCIsIl9oYW5kbGVJbnB1dCIsIl9pbnB1dEVsZW1lbnRzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hpZGVFcnJvciIsIl9kaXNhYmxlQnV0dG9uIiwiX3ZhbGlkYXRlSW5wdXQiLCJfc2V0QnV0dG9uU3RhdGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9lbmFibGVCdXR0b24iLCJzb21lIiwiZGlzYWJsZWQiLCJhcGkiLCJwcm9maWxlVmlldyIsInBpY3R1cmVQb3B1cCIsImVkaXRQb3B1cCIsInByZXZlbnREZWZhdWx0IiwidG9nZ2xlQnV0dG9uVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInNldFVzZXJJbmZvIiwidXBkYXRlVXNlciIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiYWRkUG9wdXAiLCJ0aXRsZSIsImFkZENhcmQiLCJnYWxsZXJ5U2VjdGlvbiIsImFkZEl0ZW0iLCJwaWN0dXJlRm9ybVZhbGlkYXRvciIsImF2YXRhclBvcHVwIiwidXJsIiwic2V0VXNlckF2YXRhciIsInVwZGF0ZVVzZXJBdmF0YXIiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiY29uZmlybVBvcHVwIiwicHJvZmlsZUZvcm1FbGVtZW50IiwicGljdHVyZUZvcm1FbGVtZW50IiwiYXZhdGFyRm9ybUVsZW1lbnQiLCJyZW5kZXJlciIsIml0ZW1zIiwiZWxlbWVudCIsIm5ld0VsZW1lbnQiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicHJlcGVuZCIsImNhcmRBcGlGdW5jdGlvbnMiLCJvYmoiLCJvcGVuIiwiZ2VuZXJhdGVDYXJkIiwib3duZXIiLCJnZXRDYXJkc0Zyb21BcGkiLCJjYXJkcyIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJhdmF0YXJCdXR0b24iLCJzdG9wUHJvcGFnYXRpb24iLCJnZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iLCJnZXRDYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=